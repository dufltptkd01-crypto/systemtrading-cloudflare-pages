<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#101722" />
  <title>SystemTrading Premier</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&family=Sora:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="theme-home">
  <div class="bg-grid" aria-hidden="true"></div>
  <div class="bg-glow glow-left" aria-hidden="true"></div>
  <div class="bg-glow glow-right" aria-hidden="true"></div>

  <header class="hero-nav wrap">
    <a href="#" id="brandHome" class="brand-wordmark" aria-label="STP">
      <span class="logo-badge" data-i18n="brand.name">STP</span>
    </a>

    <button id="menuToggle" class="menu-toggle" type="button" aria-expanded="false" aria-controls="menuPanel" data-i18n-aria="aria.menu_toggle">
      <span></span><span></span><span></span>
    </button>

    <div id="menuPanel" class="menu-panel">
      <nav class="left-nav" aria-label="Service Menu">
        <button class="nav-pill nav-home active" type="button" data-tab="home" data-i18n-aria="aria.home">
          <span class="home-icon" aria-hidden="true">⌂</span>
        </button>
        <button class="nav-pill" type="button" data-tab="guide" data-i18n="nav.guide">사용 방법</button>
        <button class="nav-pill" type="button" data-tab="intro" data-i18n="nav.intro">시스템 소개</button>
        <button class="nav-pill" type="button" data-tab="stock" data-i18n="nav.stock">주식 투자</button>
        <button class="nav-pill" type="button" data-tab="coin" data-i18n="nav.coin">코인 투자</button>
        <button class="nav-pill" type="button" data-tab="billing" data-i18n="nav.billing">이용권/결제</button>
        <button id="navAdmin" class="nav-pill" type="button" data-tab="admin" data-i18n="nav.admin" hidden>운영자</button>
      </nav>

      <div class="right-nav">
        <div class="lang-switch" role="group" aria-label="Language">
          <button id="btnLangKo" class="lang-btn active" type="button" data-lang="ko">KO</button>
          <button id="btnLangEn" class="lang-btn" type="button" data-lang="en">EN</button>
        </div>

        <span id="authUserChip" class="auth-user-chip" hidden></span>
        <a id="linkSignup" class="nav-pill link" href="./signup.html" data-i18n="auth.signup">회원가입</a>
        <a id="linkLogin" class="nav-pill link" href="./login.html" data-i18n="auth.login">로그인</a>
        <button id="btnLogout" class="nav-pill link nav-logout" type="button" hidden data-i18n="auth.logout">로그아웃</button>
      </div>
    </div>
  </header>

  <main class="wrap home-main">
    <section id="tab-home" class="tab-panel active">
      <section class="hero-stage glass-panel">
        <div class="hero-copy">
          <p class="hero-mini" data-i18n="hero.kicker">AI ASSET ORCHESTRATION</p>
          <h1>
            <span class="highlight-1" data-i18n="hero.title.a">판단은 더 간결하게</span><br />
            <span class="highlight-2" data-i18n="hero.title.b">실행은 더 정교하게</span>
          </h1>
          <p class="hero-sub" data-i18n="hero.sub">뉴스, 보조지표, 차트, 체결 로그를 한 흐름으로 연결해 자동매매의 품질을 일관되게 높입니다.</p>
          <div class="hero-actions">
            <button id="btnTrial" type="button" class="cta-main" data-i18n="hero.cta_trial">7일 무료체험 시작</button>
            <button id="btnGotoBilling" type="button" class="soft-btn" data-i18n="hero.cta_billing">이용권/결제 보기</button>
          </div>
          <div class="hero-points">
            <span data-i18n="hero.point.1">복합 데이터 기반 후보 선별</span>
            <span data-i18n="hero.point.2">상위 10개 중 1개 집중 진입</span>
            <span data-i18n="hero.point.3">Telegram 실시간 체결 알림</span>
          </div>
        </div>

        <div class="hero-visual" aria-hidden="true">
          <article class="pulse-card">
            <p data-i18n="hero.card.1.label">전략 루프</p>
            <strong data-i18n="hero.card.1.value">수집 → 선별 → 실행 → 개선</strong>
          </article>
          <article class="pulse-card">
            <p data-i18n="hero.card.2.label">리스크 한도</p>
            <strong data-i18n="hero.card.2.value">1회 최대 2,000,000원</strong>
          </article>
          <article class="pulse-card">
            <p data-i18n="hero.card.3.label">시장 지원</p>
            <strong data-i18n="hero.card.3.value">국내 주식 + 글로벌 코인</strong>
          </article>
        </div>
      </section>

      <section class="status-row">
        <article class="status-card">
          <span data-i18n="status.login_label">계정</span>
          <strong id="authStateBadge">미로그인</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.verify_label">본인인증</span>
          <strong id="verifyStateBadge">미인증</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.api_label">API 연결</span>
          <strong id="apiStateBadge">Demo</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.mode_label">실행 모드</span>
          <strong id="activeModeBadge">모의투자</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.subscription_label">이용권 상태</span>
          <strong id="subscriptionStateBadge">확인 필요</strong>
        </article>
      </section>

      <section class="home-shortcuts glass-panel">
        <h2 data-i18n="shortcut.title">빠른 이동</h2>
        <div class="shortcut-row">
          <button id="btnGotoGuide" type="button" class="soft-btn" data-i18n="shortcut.guide">사용 방법 보기</button>
          <button id="btnGotoStock" type="button" class="soft-btn" data-i18n="shortcut.stock">주식 투자 설정</button>
          <button id="btnGotoCoin" type="button" class="soft-btn" data-i18n="shortcut.coin">코인 투자 설정</button>
          <button id="btnGotoIntro" type="button" class="soft-btn" data-i18n="shortcut.intro">시스템 소개 보기</button>
        </div>
      </section>
    </section>

    <section id="tab-guide" class="tab-panel">
      <div class="guide-grid">
        <article class="glass-panel">
          <h2 data-i18n="guide.title">사용 방법</h2>
          <p class="lead" data-i18n="guide.lead">아래 순서대로 진행하면 바로 자동매매를 시작할 수 있습니다.</p>
          <ol class="howto-list">
            <li data-i18n="guide.step.1">회원가입 후 로그인합니다.</li>
            <li data-i18n="guide.step.2">본인인증을 완료합니다.</li>
            <li data-i18n="guide.step.3">주식/코인 탭에서 API 키와 예산을 저장합니다.</li>
            <li data-i18n="guide.step.4">실행 모드를 확인하고 자동매매 시작을 누릅니다.</li>
            <li data-i18n="guide.step.5">체결 내역은 Telegram 알림과 리포트에서 확인합니다.</li>
          </ol>
        </article>

        <article class="glass-panel">
          <h2 data-i18n="guide.stock.title">주식 투자 시작</h2>
          <ol class="howto-list">
            <li data-i18n="guide.stock.step.1">주식 탭에서 계좌번호와 키움 API 정보를 입력합니다.</li>
            <li data-i18n="guide.stock.step.2">Telegram Bot Token과 Chat ID를 입력합니다.</li>
            <li data-i18n="guide.stock.step.3">자동 종목 선정 ON이면 상위 10개 후보 중 1개를 선택합니다.</li>
            <li data-i18n="guide.stock.step.4">주식 자동매매 시작 버튼으로 실행합니다.</li>
          </ol>
          <button id="btnGuideToStock" type="button" class="soft-btn" data-i18n="guide.stock.cta">주식 탭으로 이동</button>
        </article>

        <article class="glass-panel">
          <h2 data-i18n="guide.coin.title">코인 투자 시작</h2>
          <ol class="howto-list">
            <li data-i18n="guide.coin.step.1">코인 탭에서 Binance/Upbit를 선택합니다.</li>
            <li data-i18n="guide.coin.step.2">거래소 API 키, 예산, 심볼(또는 자동선정)을 설정합니다.</li>
            <li data-i18n="guide.coin.step.3">모의투자로 점검 후 실거래 전환을 권장합니다.</li>
            <li data-i18n="guide.coin.step.4">코인 자동매매 시작 버튼으로 실행합니다.</li>
          </ol>
          <button id="btnGuideToCoin" type="button" class="soft-btn" data-i18n="guide.coin.cta">코인 탭으로 이동</button>
        </article>
      </div>
    </section>

    <section id="tab-intro" class="tab-panel">
      <div class="intro-grid">
        <article class="glass-panel">
          <h2 data-i18n="intro.title">시스템 소개</h2>
          <p class="lead" data-i18n="intro.lead">선별-집행-회고-개선 루프를 통해 자동매매 품질을 지속적으로 개선합니다.</p>
          <ul class="flow-list">
            <li>
              <h3 data-i18n="intro.flow.1.title">1. 데이터 수집</h3>
              <p data-i18n="intro.flow.1.body">뉴스, 키움 뉴스, 기술지표, 거래량/가격 패턴을 함께 평가합니다.</p>
            </li>
            <li>
              <h3 data-i18n="intro.flow.2.title">2. 후보 압축</h3>
              <p data-i18n="intro.flow.2.body">상승 가능성 상위 10개를 추린 뒤 최종 1개 종목/심볼로 집중 진입합니다.</p>
            </li>
            <li>
              <h3 data-i18n="intro.flow.3.title">3. 실행 및 알림</h3>
              <p data-i18n="intro.flow.3.body">체결 알림은 Telegram으로 전달되며 손절/익절 규칙과 함께 동작합니다.</p>
            </li>
            <li>
              <h3 data-i18n="intro.flow.4.title">4. 회고 및 개선</h3>
              <p data-i18n="intro.flow.4.body">매매 일지를 분석해 승률/손익/패턴을 파악하고 다음 세션에 반영합니다.</p>
            </li>
          </ul>
        </article>

        <article class="glass-panel feedback-panel">
          <h2 data-i18n="intro.feedback.title">매매 일지 피드백 루프</h2>
          <ol class="feedback-steps">
            <li>
              <span>01</span>
              <div>
                <h3 data-i18n="intro.feedback.1.title">체결 데이터 축적</h3>
                <p data-i18n="intro.feedback.1.body">진입 사유, 체결 단가, 거래량, 손익 결과를 자동 기록합니다.</p>
              </div>
            </li>
            <li>
              <span>02</span>
              <div>
                <h3 data-i18n="intro.feedback.2.title">성과 분석</h3>
                <p data-i18n="intro.feedback.2.body">승률/손익률/변동성 대응력을 요약해 개선 포인트를 추출합니다.</p>
              </div>
            </li>
            <li>
              <span>03</span>
              <div>
                <h3 data-i18n="intro.feedback.3.title">전략 개선 반영</h3>
                <p data-i18n="intro.feedback.3.body">선정 가중치, 진입 필터, 리스크 제한을 업데이트해 다음 거래에 반영합니다.</p>
              </div>
            </li>
          </ol>
          <div class="intro-actions">
            <button id="btnMoveStock" type="button" class="soft-btn" data-i18n="intro.cta.stock">주식 투자 설정</button>
            <button id="btnMoveCoin" type="button" class="soft-btn" data-i18n="intro.cta.coin">코인 투자 설정</button>
            <button id="btnMoveBilling" type="button" class="soft-btn" data-i18n="intro.cta.billing">이용권/결제 탭</button>
          </div>
        </article>
      </div>
    </section>

    <section id="tab-stock" class="tab-panel">
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="stock.title">주식 투자 설정</h2>
          <form id="stockForm" class="form-grid">
            <input id="apiBase" type="hidden" />

            <label for="apiToken" data-i18n="stock.api_token">Static API Token (선택)</label>
            <input id="apiToken" type="password" data-i18n-placeholder="ph.api_token" placeholder="Bearer token" />

            <label for="accountNo" data-i18n="stock.account">계좌번호</label>
            <input id="accountNo" type="text" data-i18n-placeholder="ph.account" placeholder="8120-0764" />

            <label for="stockSymbol" data-i18n="stock.symbol">주식 종목코드</label>
            <input id="stockSymbol" type="text" data-i18n-placeholder="ph.stock_symbol" placeholder="005930" />

            <label for="stockBudget" data-i18n="stock.budget">1회 최대 주문금액 (KRW)</label>
            <input id="stockBudget" type="number" min="10000" max="2000000" value="2000000" />

            <label for="stockAutoSelect" data-i18n="stock.auto_select">자동 종목 선정</label>
            <select id="stockAutoSelect">
              <option value="true">ON</option>
              <option value="false">OFF</option>
            </select>

            <label for="holdingPeriod" data-i18n="strategy.holding_period">보유 시간 선택</label>
            <select id="holdingPeriod">
              <option value="scalp" data-i18n="strategy.holding.scalp">초단타 (1~10분)</option>
              <option value="day" data-i18n="strategy.holding.day">단타 (1시간~1일)</option>
              <option value="swing" data-i18n="strategy.holding.swing">스윙 (1일~수일)</option>
            </select>
            <p class="help-inline full" data-i18n="strategy.holding.help">보유 시간 선택에 따라 이동평균/거래량/뉴스 가중치 및 손절 기준이 자동 변경됩니다.</p>

            <label for="stockDryRun" data-i18n="stock.mode">실행 모드</label>
            <select id="stockDryRun">
              <option value="true" data-i18n="stock.mode.sim_option">드라이런 (실제 주문 없음)</option>
              <option value="false" data-i18n="stock.mode.live_option">실거래 (실제 주문 실행)</option>
            </select>
            <p class="help-inline full" data-i18n="stock.mode.help">드라이런에서는 실제 주문 없이 주문 예정 정보만 로그에 기록됩니다.</p>

            <label for="dailyMaxLoss" data-i18n="risk.daily_max_loss">하루 최대 손실 (KRW)</label>
            <input id="dailyMaxLoss" type="number" min="10000" step="10000" value="300000" />

            <label for="dailyMaxTrades" data-i18n="risk.daily_max_trades">하루 최대 거래 횟수</label>
            <input id="dailyMaxTrades" type="number" min="1" max="100" value="8" />

            <label for="maxConsecutiveLosses" data-i18n="risk.max_consecutive_losses">연속 손실 시 자동중지</label>
            <input id="maxConsecutiveLosses" type="number" min="1" max="20" value="3" />

            <label for="marketCrashStopPct" data-i18n="risk.market_crash_stop">시장 급락 중지 기준 (BTC -%)</label>
            <input id="marketCrashStopPct" type="number" min="1" max="20" step="0.1" value="3" />

            <div id="strategyPresetBox" class="strategy-preset full"></div>

            <label for="kiwoomApiKey" data-i18n="stock.kiwoom_key">Kiwoom API Key</label>
            <input id="kiwoomApiKey" type="text" data-i18n-placeholder="ph.kiwoom_key" placeholder="Kiwoom API Key" />

            <label for="kiwoomApiSecret" data-i18n="stock.kiwoom_secret">Kiwoom API Secret</label>
            <input id="kiwoomApiSecret" type="password" data-i18n-placeholder="ph.kiwoom_secret" placeholder="Kiwoom API Secret" />

            <label for="telegramToken" data-i18n="stock.telegram_token">Telegram Bot Token</label>
            <input id="telegramToken" type="text" data-i18n-placeholder="ph.telegram_token" placeholder="123456:ABC..." />

            <label for="telegramChatId" class="label-with-tip">
              <span data-i18n="stock.telegram_chat">Telegram Chat ID</span>
              <span class="info-tip" tabindex="0" role="button" data-i18n-aria="tip.telegram_chat.aria" data-i18n-tip="tip.telegram_chat">?</span>
            </label>
            <input id="telegramChatId" type="text" data-i18n-placeholder="ph.telegram_chat" placeholder="123456789" />

            <div class="form-actions">
              <button id="btnSaveStock" type="submit" class="soft-btn primary" data-i18n="stock.save">주식 설정 저장</button>
              <button id="btnStartStock" type="button" class="soft-btn accent" data-i18n="stock.start">주식 자동매매 시작</button>
            </div>
          </form>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="stock.side.title">보안/실행 상태</h2>
          <p class="side-note" data-i18n="stock.side.note">회원가입/로그인은 별도 페이지에서 진행하며, 본인인증 완료 후 자동매매가 가능합니다.</p>

          <div class="action-stack">
            <button id="btnCheckApi" type="button" class="soft-btn" data-i18n="stock.api_check">API 연결 확인</button>
            <button id="btnVerifyStart" type="button" class="soft-btn" data-i18n="stock.verify_start">본인인증 시작</button>
            <button id="btnVerifyRefresh" type="button" class="soft-btn" data-i18n="stock.verify_refresh">인증 상태 새로고침</button>
          </div>

          <form id="verifyCodeForm" class="verify-form">
            <label for="verifyCode" data-i18n="stock.verify_code">인증 코드</label>
            <input id="verifyCode" type="text" data-i18n-placeholder="ph.verify_code" placeholder="6자리 코드" />
            <button type="submit" class="soft-btn" data-i18n="stock.verify_submit">코드 제출</button>
          </form>

          <p id="verifyHint" class="side-note" data-i18n="stock.verify_hint">실서비스 연동 전에는 데모 코드 방식으로 흐름을 테스트할 수 있습니다.</p>

          <div class="api-health-box">
            <h3 data-i18n="api.health.title">API 연결 진단</h3>
            <ul class="api-health-list">
              <li>
                <span data-i18n="api.health.key">API 키 유효성</span>
                <strong id="apiHealthKey">미확인</strong>
              </li>
              <li>
                <span data-i18n="api.health.balance">잔고 조회 가능</span>
                <strong id="apiHealthBalance">미확인</strong>
              </li>
              <li>
                <span data-i18n="api.health.order">주문 권한 여부</span>
                <strong id="apiHealthOrder">미확인</strong>
              </li>
              <li>
                <span data-i18n="api.health.ip">IP 제한 여부</span>
                <strong id="apiHealthIp">미확인</strong>
              </li>
            </ul>
            <p id="apiHealthCheckedAt" class="side-note">최근 확인: -</p>
          </div>
          <p class="side-note" data-i18n="security.note">보안을 위해 API Secret은 브라우저 저장소에 저장하지 않고 실행 시에만 사용됩니다.</p>
        </article>
      </div>

      <div class="setup-grid top-gap">
        <article class="glass-panel chart-panel">
          <div class="panel-head">
            <h2 data-i18n="chart.stock.title">주식 트레이딩뷰 차트</h2>
            <span id="stockChartSymbolLabel" class="chart-symbol-chip">KRX:005930</span>
          </div>
          <p class="side-note" data-i18n="chart.stock.lead">선택한 주식 종목코드 기준으로 차트가 자동 갱신됩니다.</p>
          <div class="tv-chart-frame top-gap">
            <iframe
              id="stockChartFrame"
              title="Stock TradingView Chart"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              allowfullscreen>
            </iframe>
          </div>
        </article>

        <article class="glass-panel">
          <div class="panel-head">
            <h2 data-i18n="reco.title">AI 추천 종목</h2>
            <button id="btnRefreshReco" type="button" class="soft-btn" data-i18n="reco.refresh">추천 새로고침</button>
          </div>
          <p class="lead" data-i18n="reco.lead">1단계(뉴스/거래량/변동성) 후보 선정 후 2단계(지표 스코어링)로 최종 추천을 생성합니다. 총점 70점 이상만 추천합니다.</p>
          <div id="recommendationCards" class="recommendation-grid">
            <article class="recommendation-card placeholder-card">
              <h3 data-i18n="reco.empty.title">추천 대기 중</h3>
              <p data-i18n="reco.empty.body">설정 저장 후 추천 새로고침 또는 자동매매 시작 시 추천 카드가 생성됩니다.</p>
            </article>
          </div>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="arch.title">엔진 분리 구조</h2>
          <ol class="flow-list architecture-list">
            <li>
              <h3 data-i18n="arch.step.1">1. 뉴스 수집 서버</h3>
              <p data-i18n="arch.step.1.body">뉴스 언급량, 긍정/부정 흐름을 수집합니다.</p>
            </li>
            <li>
              <h3 data-i18n="arch.step.2">2. 지표 분석 서버</h3>
              <p data-i18n="arch.step.2.body">RSI, 이동평균, 거래량/변동성 지표를 계산합니다.</p>
            </li>
            <li>
              <h3 data-i18n="arch.step.3">3. 추천 생성 엔진</h3>
              <p data-i18n="arch.step.3.body">2단계 스코어링으로 상위 후보를 압축합니다.</p>
            </li>
            <li>
              <h3 data-i18n="arch.step.4">4. 주문 실행 서버</h3>
              <p data-i18n="arch.step.4.body">리스크 한도 검증 후 주문을 실행하고 일지를 기록합니다.</p>
            </li>
          </ol>
        </article>
      </div>

      <article class="glass-panel top-gap">
        <h2 data-i18n="journal.title">자동매매 로그 / 분석</h2>
        <div class="journal-summary">
          <div class="journal-item">
            <span data-i18n="journal.summary.win_rate">승률</span>
            <strong id="summaryWinRate">-</strong>
          </div>
          <div class="journal-item">
            <span data-i18n="journal.summary.total_pnl">총 손익</span>
            <strong id="summaryTotalPnl">-</strong>
          </div>
          <div class="journal-item">
            <span data-i18n="journal.summary.max_drawdown">최대 낙폭</span>
            <strong id="summaryMaxDrawdown">-</strong>
          </div>
        </div>
        <div class="journal-table-wrap top-gap">
          <table class="journal-table">
            <thead>
              <tr>
                <th scope="col" data-i18n="journal.col.market">시장</th>
                <th scope="col" data-i18n="journal.col.buy_at">매수 시간</th>
                <th scope="col" data-i18n="journal.col.sell_at">매도 시간</th>
                <th scope="col" data-i18n="journal.col.reason">진입 이유</th>
                <th scope="col" data-i18n="journal.col.pnl">손익</th>
                <th scope="col" data-i18n="journal.col.score">추천 점수</th>
                <th scope="col" data-i18n="journal.col.basis">추천 근거</th>
                <th scope="col" data-i18n="journal.col.news">뉴스 요약</th>
                <th scope="col" data-i18n="journal.col.indicators">지표 값</th>
              </tr>
            </thead>
            <tbody id="journalTableBody">
              <tr>
                <td class="journal-empty" colspan="9" data-i18n="journal.empty">아직 매매 기록이 없습니다.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </article>
    </section>

    <section id="tab-coin" class="tab-panel">
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="coin.title">코인 투자 설정</h2>
          <form id="coinForm" class="form-grid">
            <label for="coinExchange" data-i18n="coin.exchange">거래소</label>
            <select id="coinExchange">
              <option value="binance">Binance</option>
              <option value="upbit">Upbit</option>
            </select>

            <label for="coinSymbol" data-i18n="coin.symbol">심볼</label>
            <input id="coinSymbol" type="text" data-i18n-placeholder="ph.coin_symbol" placeholder="BTC/USDT 또는 BTC/KRW" />

            <label for="coinBudget" data-i18n="coin.budget">1회 최대 주문금액 (KRW)</label>
            <input id="coinBudget" type="number" min="10000" max="2000000" value="2000000" />

            <label for="coinAutoSelect" data-i18n="coin.auto_select">자동 심볼 선정</label>
            <select id="coinAutoSelect">
              <option value="true">ON</option>
              <option value="false">OFF</option>
            </select>

            <label for="coinDryRun" data-i18n="coin.mode">실행 모드</label>
            <select id="coinDryRun">
              <option value="true" data-i18n="coin.mode.sim_option">드라이런 (실제 주문 없음)</option>
              <option value="false" data-i18n="coin.mode.live_option">실거래 (실제 주문 실행)</option>
            </select>
            <p class="help-inline full" data-i18n="coin.mode.help">드라이런에서는 실제 주문 없이 주문 예정 정보만 로그에 기록됩니다.</p>

            <label for="binanceApiKey" class="coin-only-binance" data-i18n="coin.binance_key">Binance API Key</label>
            <input id="binanceApiKey" class="coin-only-binance" type="text" data-i18n-placeholder="ph.binance_key" placeholder="Binance API Key" />

            <label for="binanceApiSecret" class="coin-only-binance" data-i18n="coin.binance_secret">Binance API Secret</label>
            <input id="binanceApiSecret" class="coin-only-binance" type="password" data-i18n-placeholder="ph.binance_secret" placeholder="Binance API Secret" />

            <label for="upbitApiKey" class="coin-only-upbit" data-i18n="coin.upbit_key">Upbit Access Key</label>
            <input id="upbitApiKey" class="coin-only-upbit" type="text" data-i18n-placeholder="ph.upbit_key" placeholder="Upbit Access Key" />

            <label for="upbitApiSecret" class="coin-only-upbit" data-i18n="coin.upbit_secret">Upbit Secret Key</label>
            <input id="upbitApiSecret" class="coin-only-upbit" type="password" data-i18n-placeholder="ph.upbit_secret" placeholder="Upbit Secret Key" />

            <div class="form-actions">
              <button id="btnSaveCoin" type="submit" class="soft-btn primary" data-i18n="coin.save">코인 설정 저장</button>
              <button id="btnStartCoin" type="button" class="soft-btn accent" data-i18n="coin.start">코인 자동매매 시작</button>
            </div>
          </form>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="coin.side.title">자동매매 운영</h2>
          <div class="action-stack">
            <button id="btnStop" type="button" class="soft-btn danger" data-i18n="coin.stop">자동매매 중지</button>
            <button id="btnAnalyze" type="button" class="soft-btn" data-i18n="coin.analyze">매매일지 분석 실행</button>
            <button id="btnLoadReport" type="button" class="soft-btn" data-i18n="coin.report">최근 분석 리포트 조회</button>
          </div>
          <p id="guardText" class="side-note" data-i18n="coin.guard">실행 전: 로그인 + 본인인증 + 이용권 + API 확인이 필요합니다.</p>
        </article>
      </div>

      <article class="glass-panel chart-panel top-gap">
        <div class="panel-head">
          <h2 data-i18n="chart.coin.title">코인 트레이딩뷰 차트</h2>
          <span id="coinChartSymbolLabel" class="chart-symbol-chip">BINANCE:BTCUSDT</span>
        </div>
        <p class="side-note" data-i18n="chart.coin.lead">거래소 및 심볼 설정값에 맞춰 차트가 자동 갱신됩니다.</p>
        <div class="tv-chart-frame top-gap">
          <iframe
            id="coinChartFrame"
            title="Crypto TradingView Chart"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            allowfullscreen>
          </iframe>
        </div>
      </article>
    </section>

    <section id="tab-billing" class="tab-panel">
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="billing.title">이용권/결제</h2>
          <p class="lead" data-i18n="billing.lead">회원가입 후 7일은 무료체험으로 자동매매가 가능하며, 이후에는 구독권 결제가 필요합니다.</p>

          <div class="billing-grid">
            <div class="billing-item">
              <span data-i18n="billing.state">이용 상태</span>
              <strong id="billingStateText">확인 필요</strong>
            </div>
            <div class="billing-item">
              <span data-i18n="billing.trial_end">무료체험 종료일</span>
              <strong id="trialEndText">-</strong>
            </div>
            <div class="billing-item">
              <span data-i18n="billing.sub_end">구독 만료일</span>
              <strong id="subscriptionEndText">-</strong>
            </div>
            <div class="billing-item">
              <span data-i18n="billing.remain">남은 기간</span>
              <strong id="billingRemainText">-</strong>
            </div>
          </div>

          <div class="action-stack top-gap">
            <button id="btnCheckout" type="button" class="soft-btn accent" data-i18n="billing.checkout">월 구독 결제 시작</button>
            <button id="btnConfirmPayment" type="button" class="soft-btn" data-i18n="billing.confirm">결제 완료 처리 (데모)</button>
            <button id="btnRefreshBilling" type="button" class="soft-btn" data-i18n="billing.refresh">이용권 상태 새로고침</button>
          </div>

          <p class="side-note" data-i18n="billing.note">실서비스에서는 PG사(예: 토스페이먼츠/PortOne/Stripe) Webhook 검증 후 구독 상태를 서버 DB에 반영하세요.</p>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="billing.manage_title">회원정보 보관/관리</h2>
          <ul class="guide-list">
            <li data-i18n="billing.manage.1">회원 기본정보, 인증상태, 이용권 상태를 DB에 분리 저장하세요.</li>
            <li data-i18n="billing.manage.2">비밀번호는 해시 저장, API 키는 암호화 저장하세요.</li>
            <li data-i18n="billing.manage.3">운영자 화면에서 회원검색/구독갱신/결제조회 기능을 제공하세요.</li>
          </ul>

          <p class="side-note" data-i18n="billing.admin_hint">운영자 회원관리는 관리자 계정으로 로그인 후 운영자 메뉴에서 확인할 수 있습니다.</p>
        </article>
      </div>
    </section>

    <section id="tab-admin" class="tab-panel" hidden>
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="admin.title">운영자 회원관리</h2>
          <p class="lead" data-i18n="admin.lead">관리자 계정으로 로그인한 경우에만 회원 정보를 조회할 수 있습니다.</p>
          <div class="action-stack top-gap">
            <button id="btnExportUsers" type="button" class="soft-btn" data-i18n="billing.export">데모 회원정보 불러오기</button>
          </div>
          <div class="admin-table-wrap top-gap">
            <table class="admin-table">
              <thead>
                <tr>
                  <th scope="col" data-i18n="admin.table.id">ID</th>
                  <th scope="col" data-i18n="admin.table.email">이메일</th>
                  <th scope="col" data-i18n="admin.table.name">이름</th>
                  <th scope="col" data-i18n="admin.table.verified">인증</th>
                  <th scope="col" data-i18n="admin.table.billing">이용권 상태</th>
                  <th scope="col" data-i18n="admin.table.can_trade">자동매매</th>
                  <th scope="col" data-i18n="admin.table.created">가입일</th>
                  <th scope="col" data-i18n="admin.table.trial_end">무료체험 만료</th>
                  <th scope="col" data-i18n="admin.table.sub_end">구독 만료</th>
                </tr>
              </thead>
              <tbody id="userTableBody">
                <tr>
                  <td class="admin-table-empty" colspan="9" data-i18n="billing.export_default">관리 데이터를 불러오려면 버튼을 누르세요.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="billing.manage_title">회원정보 보관/관리</h2>
          <ul class="guide-list">
            <li data-i18n="billing.manage.1">회원 기본정보, 인증상태, 이용권 상태를 DB에 분리 저장하세요.</li>
            <li data-i18n="billing.manage.2">비밀번호는 해시 저장, API 키는 암호화 저장하세요.</li>
            <li data-i18n="billing.manage.3">운영자 화면에서 회원검색/구독갱신/결제조회 기능을 제공하세요.</li>
          </ul>
          <p class="side-note" data-i18n="admin.notice">데모 모드 관리자 계정: dufltptkd01@naver.com</p>
        </article>
      </div>
    </section>

    <section class="result-area glass-panel">
      <h2 data-i18n="result.title">실행 로그</h2>
      <pre id="resultBox" data-i18n="result.default">준비 완료. 상단 탭에서 설정을 완료하고 자동매매를 시작하세요.</pre>
    </section>
  </main>

  <section id="liveConfirmModal" class="modal-root" hidden>
    <div class="modal-backdrop" data-close-live-modal="true"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="liveConfirmTitle">
      <h2 id="liveConfirmTitle" data-i18n="live.title">실거래 전환 확인</h2>
      <p class="side-note" data-i18n="live.lead">실거래는 실제 주문이 실행됩니다. 아래 위험 한도를 확인해 주세요.</p>
      <ul class="modal-check-list">
        <li>
          <span data-i18n="live.max_order">1회 최대 주문금액</span>
          <strong id="liveConfirmOrderMax">-</strong>
        </li>
        <li>
          <span data-i18n="live.daily_loss">하루 손실 제한</span>
          <strong id="liveConfirmLossLimit">-</strong>
        </li>
      </ul>
      <p id="liveConfirmStepText" class="modal-step">1 / 2 확인 단계</p>
      <div class="modal-actions">
        <button id="btnLiveConfirmCancel" type="button" class="soft-btn" data-i18n="live.cancel">취소</button>
        <button id="btnLiveConfirmNext" type="button" class="soft-btn primary" data-i18n="live.next">다음 확인</button>
        <button id="btnLiveConfirmFinal" type="button" class="soft-btn accent" data-i18n="live.final" hidden>최종 실행</button>
      </div>
    </div>
  </section>

  <script src="./config.js"></script>
  <script src="./portal-core.js"></script>
  <script src="./index.js"></script>
</body>
</html>
