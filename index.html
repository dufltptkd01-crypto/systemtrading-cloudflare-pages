<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#101722" />
  <title>SystemTrading Premier</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&family=Sora:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="theme-home">
  <div class="bg-grid" aria-hidden="true"></div>
  <div class="bg-glow glow-left" aria-hidden="true"></div>
  <div class="bg-glow glow-right" aria-hidden="true"></div>

  <header class="hero-nav wrap">
    <a href="#" id="brandHome" class="brand-wordmark" aria-label="STP">
      <span class="logo-badge" data-i18n="brand.name">STP</span>
    </a>

    <button id="menuToggle" class="menu-toggle" type="button" aria-expanded="false" aria-controls="menuPanel" data-i18n-aria="aria.menu_toggle">
      <span></span><span></span><span></span>
    </button>

    <div id="menuPanel" class="menu-panel">
      <nav class="left-nav" aria-label="Service Menu">
        <button class="nav-pill nav-home active" type="button" data-tab="home" data-i18n-aria="aria.home">
          <span class="home-icon" aria-hidden="true">⌂</span>
        </button>
        <button class="nav-pill" type="button" data-tab="guide" data-i18n="nav.guide">사용 방법</button>
        <button class="nav-pill" type="button" data-tab="intro" data-i18n="nav.intro">시스템 소개</button>
        <button class="nav-pill" type="button" data-tab="stock" data-i18n="nav.stock">주식 투자</button>
        <button class="nav-pill" type="button" data-tab="coin" data-i18n="nav.coin">코인 투자</button>
        <button class="nav-pill" type="button" data-tab="billing" data-i18n="nav.billing">이용권/결제</button>
        <button id="navAdmin" class="nav-pill" type="button" data-tab="admin" data-i18n="nav.admin" hidden>운영자</button>
      </nav>

      <div class="right-nav">
        <div class="lang-switch" role="group" aria-label="Language">
          <button id="btnLangKo" class="lang-btn active" type="button" data-lang="ko">KO</button>
          <button id="btnLangEn" class="lang-btn" type="button" data-lang="en">EN</button>
        </div>

        <span id="authUserChip" class="auth-user-chip" hidden></span>
        <a id="linkSignup" class="nav-pill link" href="./signup.html" data-i18n="auth.signup">회원가입</a>
        <a id="linkLogin" class="nav-pill link" href="./login.html" data-i18n="auth.login">로그인</a>
        <button id="btnLogout" class="nav-pill link nav-logout" type="button" hidden data-i18n="auth.logout">로그아웃</button>
      </div>
    </div>
  </header>

  <main class="wrap home-main">
    <section id="tab-home" class="tab-panel active">
      <section class="hero-stage glass-panel">
        <div class="hero-copy">
          <p class="hero-mini" data-i18n="hero.kicker">AI ASSET ORCHESTRATION</p>
          <h1>
            <span class="highlight-1" data-i18n="hero.title.a">판단은 더 간결하게</span><br />
            <span class="highlight-2" data-i18n="hero.title.b">실행은 더 정교하게</span>
          </h1>
          <p class="hero-sub" data-i18n="hero.sub">뉴스, 보조지표, 차트, 체결 로그를 한 흐름으로 연결해 자동매매의 품질을 일관되게 높입니다.</p>
          <div class="hero-actions">
            <button id="btnTrial" type="button" class="cta-main" data-i18n="hero.cta_trial">7일 무료체험 시작</button>
            <button id="btnGotoBilling" type="button" class="soft-btn" data-i18n="hero.cta_billing">이용권/결제 보기</button>
          </div>
          <div class="hero-points">
            <span data-i18n="hero.point.1">복합 데이터 기반 후보 선별</span>
            <span data-i18n="hero.point.2">상위 10개 중 1개 집중 진입</span>
            <span data-i18n="hero.point.3">Telegram 실시간 체결 알림</span>
          </div>
        </div>

        <div class="hero-visual" aria-hidden="true">
          <article class="pulse-card">
            <p data-i18n="hero.card.1.label">전략 루프</p>
            <strong data-i18n="hero.card.1.value">수집 → 선별 → 실행 → 개선</strong>
          </article>
          <article class="pulse-card">
            <p data-i18n="hero.card.2.label">리스크 한도</p>
            <strong data-i18n="hero.card.2.value">1회 최대 2,000,000원</strong>
          </article>
          <article class="pulse-card">
            <p data-i18n="hero.card.3.label">시장 지원</p>
            <strong data-i18n="hero.card.3.value">국내 주식 + 글로벌 코인</strong>
          </article>
        </div>
      </section>

      <section class="status-row">
        <article class="status-card">
          <span data-i18n="status.login_label">계정</span>
          <strong id="authStateBadge">미로그인</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.verify_label">본인인증</span>
          <strong id="verifyStateBadge">미인증</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.api_label">API 연결</span>
          <strong id="apiStateBadge">Demo</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.mode_label">실행 모드</span>
          <strong id="activeModeBadge">모의투자</strong>
        </article>
        <article class="status-card">
          <span data-i18n="status.subscription_label">이용권 상태</span>
          <strong id="subscriptionStateBadge">확인 필요</strong>
        </article>
      </section>

      <section class="home-shortcuts glass-panel">
        <h2 data-i18n="shortcut.title">빠른 이동</h2>
        <div class="shortcut-row">
          <button id="btnGotoGuide" type="button" class="soft-btn" data-i18n="shortcut.guide">사용 방법 보기</button>
          <button id="btnGotoStock" type="button" class="soft-btn" data-i18n="shortcut.stock">주식 투자 설정</button>
          <button id="btnGotoCoin" type="button" class="soft-btn" data-i18n="shortcut.coin">코인 투자 설정</button>
          <button id="btnGotoIntro" type="button" class="soft-btn" data-i18n="shortcut.intro">시스템 소개 보기</button>
        </div>
      </section>
    </section>

    <section id="tab-guide" class="tab-panel">
      <div class="guide-grid">
        <article class="glass-panel">
          <h2 data-i18n="guide.title">사용 방법</h2>
          <p class="lead" data-i18n="guide.lead">아래 순서대로 진행하면 바로 자동매매를 시작할 수 있습니다.</p>
          <ol class="howto-list">
            <li data-i18n="guide.step.1">회원가입 후 로그인합니다.</li>
            <li data-i18n="guide.step.2">본인인증을 완료합니다.</li>
            <li data-i18n="guide.step.3">주식/코인 탭에서 API 키와 예산을 저장합니다.</li>
            <li data-i18n="guide.step.4">실행 모드를 확인하고 자동매매 시작을 누릅니다.</li>
            <li data-i18n="guide.step.5">체결 내역은 Telegram 알림과 리포트에서 확인합니다.</li>
          </ol>
        </article>

        <article class="glass-panel">
          <h2 data-i18n="guide.stock.title">주식 투자 시작</h2>
          <ol class="howto-list">
            <li data-i18n="guide.stock.step.1">주식 탭에서 계좌번호와 키움 API 정보를 입력합니다.</li>
            <li data-i18n="guide.stock.step.2">Telegram Bot Token과 Chat ID를 입력합니다.</li>
            <li data-i18n="guide.stock.step.3">자동 종목 선정 ON이면 상위 10개 후보 중 1개를 선택합니다.</li>
            <li data-i18n="guide.stock.step.4">주식 자동매매 시작 버튼으로 실행합니다.</li>
          </ol>
          <button id="btnGuideToStock" type="button" class="soft-btn" data-i18n="guide.stock.cta">주식 탭으로 이동</button>
        </article>

        <article class="glass-panel">
          <h2 data-i18n="guide.coin.title">코인 투자 시작</h2>
          <ol class="howto-list">
            <li data-i18n="guide.coin.step.1">코인 탭에서 Binance/Upbit를 선택합니다.</li>
            <li data-i18n="guide.coin.step.2">거래소 API 키, 예산, 심볼(또는 자동선정)을 설정합니다.</li>
            <li data-i18n="guide.coin.step.3">모의투자로 점검 후 실거래 전환을 권장합니다.</li>
            <li data-i18n="guide.coin.step.4">코인 자동매매 시작 버튼으로 실행합니다.</li>
          </ol>
          <button id="btnGuideToCoin" type="button" class="soft-btn" data-i18n="guide.coin.cta">코인 탭으로 이동</button>
        </article>
      </div>
    </section>

    <section id="tab-intro" class="tab-panel">
      <div class="intro-grid">
        <article class="glass-panel">
          <h2 data-i18n="intro.title">시스템 소개</h2>
          <p class="lead" data-i18n="intro.lead">선별-집행-회고-개선 루프를 통해 자동매매 품질을 지속적으로 개선합니다.</p>
          <ul class="flow-list">
            <li>
              <h3 data-i18n="intro.flow.1.title">1. 데이터 수집</h3>
              <p data-i18n="intro.flow.1.body">뉴스, 키움 뉴스, 기술지표, 거래량/가격 패턴을 함께 평가합니다.</p>
            </li>
            <li>
              <h3 data-i18n="intro.flow.2.title">2. 후보 압축</h3>
              <p data-i18n="intro.flow.2.body">상승 가능성 상위 10개를 추린 뒤 최종 1개 종목/심볼로 집중 진입합니다.</p>
            </li>
            <li>
              <h3 data-i18n="intro.flow.3.title">3. 실행 및 알림</h3>
              <p data-i18n="intro.flow.3.body">체결 알림은 Telegram으로 전달되며 손절/익절 규칙과 함께 동작합니다.</p>
            </li>
            <li>
              <h3 data-i18n="intro.flow.4.title">4. 회고 및 개선</h3>
              <p data-i18n="intro.flow.4.body">매매 일지를 분석해 승률/손익/패턴을 파악하고 다음 세션에 반영합니다.</p>
            </li>
          </ul>
        </article>

        <article class="glass-panel feedback-panel">
          <h2 data-i18n="intro.feedback.title">매매 일지 피드백 루프</h2>
          <ol class="feedback-steps">
            <li>
              <span>01</span>
              <div>
                <h3 data-i18n="intro.feedback.1.title">체결 데이터 축적</h3>
                <p data-i18n="intro.feedback.1.body">진입 사유, 체결 단가, 거래량, 손익 결과를 자동 기록합니다.</p>
              </div>
            </li>
            <li>
              <span>02</span>
              <div>
                <h3 data-i18n="intro.feedback.2.title">성과 분석</h3>
                <p data-i18n="intro.feedback.2.body">승률/손익률/변동성 대응력을 요약해 개선 포인트를 추출합니다.</p>
              </div>
            </li>
            <li>
              <span>03</span>
              <div>
                <h3 data-i18n="intro.feedback.3.title">전략 개선 반영</h3>
                <p data-i18n="intro.feedback.3.body">선정 가중치, 진입 필터, 리스크 제한을 업데이트해 다음 거래에 반영합니다.</p>
              </div>
            </li>
          </ol>
          <div class="intro-actions">
            <button id="btnMoveStock" type="button" class="soft-btn" data-i18n="intro.cta.stock">주식 투자 설정</button>
            <button id="btnMoveCoin" type="button" class="soft-btn" data-i18n="intro.cta.coin">코인 투자 설정</button>
            <button id="btnMoveBilling" type="button" class="soft-btn" data-i18n="intro.cta.billing">이용권/결제 탭</button>
          </div>
        </article>
      </div>
    </section>

    <section id="tab-stock" class="tab-panel">
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="stock.title">주식 투자 설정</h2>
          <form id="stockForm" class="form-grid">
            <label for="apiBase" class="label-with-tip">
              <span data-i18n="stock.api_base">Backend API Base URL</span>
              <span class="info-tip" tabindex="0" role="button" data-i18n-aria="tip.api_base.aria" data-i18n-tip="tip.api_base">?</span>
            </label>
            <input id="apiBase" type="text" data-i18n-placeholder="ph.api_base" placeholder="https://api.example.com" />

            <label for="apiToken" data-i18n="stock.api_token">Static API Token (선택)</label>
            <input id="apiToken" type="password" data-i18n-placeholder="ph.api_token" placeholder="Bearer token" />

            <label for="accountNo" data-i18n="stock.account">계좌번호</label>
            <input id="accountNo" type="text" data-i18n-placeholder="ph.account" placeholder="8120-0764" />

            <label for="stockSymbol" data-i18n="stock.symbol">주식 종목코드</label>
            <input id="stockSymbol" type="text" data-i18n-placeholder="ph.stock_symbol" placeholder="005930" />

            <label for="stockBudget" data-i18n="stock.budget">1회 최대 주문금액 (KRW)</label>
            <input id="stockBudget" type="number" min="10000" max="2000000" value="2000000" />

            <label for="stockAutoSelect" data-i18n="stock.auto_select">자동 종목 선정</label>
            <select id="stockAutoSelect">
              <option value="true">ON</option>
              <option value="false">OFF</option>
            </select>

            <label for="stockDryRun" data-i18n="stock.mode">실행 모드</label>
            <select id="stockDryRun">
              <option value="true" data-i18n="stock.mode.sim_option">모의투자 (실제 주문 없음)</option>
              <option value="false" data-i18n="stock.mode.live_option">실거래 (실제 주문 실행)</option>
            </select>
            <p class="help-inline full" data-i18n="stock.mode.help">모의투자는 주문 테스트용, 실거래는 실제 계좌에 주문이 실행됩니다.</p>

            <label for="kiwoomApiKey" data-i18n="stock.kiwoom_key">Kiwoom API Key</label>
            <input id="kiwoomApiKey" type="text" data-i18n-placeholder="ph.kiwoom_key" placeholder="Kiwoom API Key" />

            <label for="kiwoomApiSecret" data-i18n="stock.kiwoom_secret">Kiwoom API Secret</label>
            <input id="kiwoomApiSecret" type="password" data-i18n-placeholder="ph.kiwoom_secret" placeholder="Kiwoom API Secret" />

            <label for="telegramToken" data-i18n="stock.telegram_token">Telegram Bot Token</label>
            <input id="telegramToken" type="text" data-i18n-placeholder="ph.telegram_token" placeholder="123456:ABC..." />

            <label for="telegramChatId" class="label-with-tip">
              <span data-i18n="stock.telegram_chat">Telegram Chat ID</span>
              <span class="info-tip" tabindex="0" role="button" data-i18n-aria="tip.telegram_chat.aria" data-i18n-tip="tip.telegram_chat">?</span>
            </label>
            <input id="telegramChatId" type="text" data-i18n-placeholder="ph.telegram_chat" placeholder="123456789" />

            <div class="form-actions">
              <button id="btnSaveStock" type="submit" class="soft-btn primary" data-i18n="stock.save">주식 설정 저장</button>
              <button id="btnStartStock" type="button" class="soft-btn accent" data-i18n="stock.start">주식 자동매매 시작</button>
            </div>
          </form>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="stock.side.title">보안/실행 상태</h2>
          <p class="side-note" data-i18n="stock.side.note">회원가입/로그인은 별도 페이지에서 진행하며, 본인인증 완료 후 자동매매가 가능합니다.</p>

          <div class="action-stack">
            <button id="btnCheckApi" type="button" class="soft-btn" data-i18n="stock.api_check">API 연결 확인</button>
            <button id="btnVerifyStart" type="button" class="soft-btn" data-i18n="stock.verify_start">본인인증 시작</button>
            <button id="btnVerifyRefresh" type="button" class="soft-btn" data-i18n="stock.verify_refresh">인증 상태 새로고침</button>
          </div>

          <form id="verifyCodeForm" class="verify-form">
            <label for="verifyCode" data-i18n="stock.verify_code">인증 코드</label>
            <input id="verifyCode" type="text" data-i18n-placeholder="ph.verify_code" placeholder="6자리 코드" />
            <button type="submit" class="soft-btn" data-i18n="stock.verify_submit">코드 제출</button>
          </form>

          <p id="verifyHint" class="side-note" data-i18n="stock.verify_hint">실서비스 연동 전에는 데모 코드 방식으로 흐름을 테스트할 수 있습니다.</p>
        </article>
      </div>
    </section>

    <section id="tab-coin" class="tab-panel">
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="coin.title">코인 투자 설정</h2>
          <form id="coinForm" class="form-grid">
            <label for="coinExchange" data-i18n="coin.exchange">거래소</label>
            <select id="coinExchange">
              <option value="binance">Binance</option>
              <option value="upbit">Upbit</option>
            </select>

            <label for="coinSymbol" data-i18n="coin.symbol">심볼</label>
            <input id="coinSymbol" type="text" data-i18n-placeholder="ph.coin_symbol" placeholder="BTC/USDT 또는 BTC/KRW" />

            <label for="coinBudget" data-i18n="coin.budget">1회 최대 주문금액 (KRW)</label>
            <input id="coinBudget" type="number" min="10000" max="2000000" value="2000000" />

            <label for="coinAutoSelect" data-i18n="coin.auto_select">자동 심볼 선정</label>
            <select id="coinAutoSelect">
              <option value="true">ON</option>
              <option value="false">OFF</option>
            </select>

            <label for="coinDryRun" data-i18n="coin.mode">실행 모드</label>
            <select id="coinDryRun">
              <option value="true" data-i18n="coin.mode.sim_option">모의투자 (실제 주문 없음)</option>
              <option value="false" data-i18n="coin.mode.live_option">실거래 (실제 주문 실행)</option>
            </select>
            <p class="help-inline full" data-i18n="coin.mode.help">모의투자는 시뮬레이션, 실거래는 실제 거래소 주문입니다.</p>

            <label for="binanceApiKey" class="coin-only-binance" data-i18n="coin.binance_key">Binance API Key</label>
            <input id="binanceApiKey" class="coin-only-binance" type="text" data-i18n-placeholder="ph.binance_key" placeholder="Binance API Key" />

            <label for="binanceApiSecret" class="coin-only-binance" data-i18n="coin.binance_secret">Binance API Secret</label>
            <input id="binanceApiSecret" class="coin-only-binance" type="password" data-i18n-placeholder="ph.binance_secret" placeholder="Binance API Secret" />

            <label for="upbitApiKey" class="coin-only-upbit" data-i18n="coin.upbit_key">Upbit Access Key</label>
            <input id="upbitApiKey" class="coin-only-upbit" type="text" data-i18n-placeholder="ph.upbit_key" placeholder="Upbit Access Key" />

            <label for="upbitApiSecret" class="coin-only-upbit" data-i18n="coin.upbit_secret">Upbit Secret Key</label>
            <input id="upbitApiSecret" class="coin-only-upbit" type="password" data-i18n-placeholder="ph.upbit_secret" placeholder="Upbit Secret Key" />

            <div class="form-actions">
              <button id="btnSaveCoin" type="submit" class="soft-btn primary" data-i18n="coin.save">코인 설정 저장</button>
              <button id="btnStartCoin" type="button" class="soft-btn accent" data-i18n="coin.start">코인 자동매매 시작</button>
            </div>
          </form>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="coin.side.title">자동매매 운영</h2>
          <div class="action-stack">
            <button id="btnStop" type="button" class="soft-btn danger" data-i18n="coin.stop">자동매매 중지</button>
            <button id="btnAnalyze" type="button" class="soft-btn" data-i18n="coin.analyze">매매일지 분석 실행</button>
            <button id="btnLoadReport" type="button" class="soft-btn" data-i18n="coin.report">최근 분석 리포트 조회</button>
          </div>
          <p id="guardText" class="side-note" data-i18n="coin.guard">실행 전: 로그인 + 본인인증 + 이용권 + API 확인이 필요합니다.</p>
        </article>
      </div>
    </section>

    <section id="tab-billing" class="tab-panel">
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="billing.title">이용권/결제</h2>
          <p class="lead" data-i18n="billing.lead">회원가입 후 7일은 무료체험으로 자동매매가 가능하며, 이후에는 구독권 결제가 필요합니다.</p>

          <div class="billing-grid">
            <div class="billing-item">
              <span data-i18n="billing.state">이용 상태</span>
              <strong id="billingStateText">확인 필요</strong>
            </div>
            <div class="billing-item">
              <span data-i18n="billing.trial_end">무료체험 종료일</span>
              <strong id="trialEndText">-</strong>
            </div>
            <div class="billing-item">
              <span data-i18n="billing.sub_end">구독 만료일</span>
              <strong id="subscriptionEndText">-</strong>
            </div>
            <div class="billing-item">
              <span data-i18n="billing.remain">남은 기간</span>
              <strong id="billingRemainText">-</strong>
            </div>
          </div>

          <div class="action-stack top-gap">
            <button id="btnCheckout" type="button" class="soft-btn accent" data-i18n="billing.checkout">월 구독 결제 시작</button>
            <button id="btnConfirmPayment" type="button" class="soft-btn" data-i18n="billing.confirm">결제 완료 처리 (데모)</button>
            <button id="btnRefreshBilling" type="button" class="soft-btn" data-i18n="billing.refresh">이용권 상태 새로고침</button>
          </div>

          <p class="side-note" data-i18n="billing.note">실서비스에서는 PG사(예: 토스페이먼츠/PortOne/Stripe) Webhook 검증 후 구독 상태를 서버 DB에 반영하세요.</p>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="billing.manage_title">회원정보 보관/관리</h2>
          <ul class="guide-list">
            <li data-i18n="billing.manage.1">회원 기본정보, 인증상태, 이용권 상태를 DB에 분리 저장하세요.</li>
            <li data-i18n="billing.manage.2">비밀번호는 해시 저장, API 키는 암호화 저장하세요.</li>
            <li data-i18n="billing.manage.3">운영자 화면에서 회원검색/구독갱신/결제조회 기능을 제공하세요.</li>
          </ul>

          <p class="side-note" data-i18n="billing.admin_hint">운영자 회원관리는 관리자 계정으로 로그인 후 운영자 메뉴에서 확인할 수 있습니다.</p>
        </article>
      </div>
    </section>

    <section id="tab-admin" class="tab-panel" hidden>
      <div class="setup-grid">
        <article class="glass-panel">
          <h2 data-i18n="admin.title">운영자 회원관리</h2>
          <p class="lead" data-i18n="admin.lead">관리자 계정으로 로그인한 경우에만 회원 정보를 조회할 수 있습니다.</p>
          <div class="action-stack top-gap">
            <button id="btnExportUsers" type="button" class="soft-btn" data-i18n="billing.export">데모 회원정보 내보내기</button>
          </div>
          <pre id="userExportBox" class="compact-pre top-gap" data-i18n="billing.export_default">관리 데이터를 불러오려면 버튼을 누르세요.</pre>
        </article>

        <article class="glass-panel side-panel">
          <h2 data-i18n="billing.manage_title">회원정보 보관/관리</h2>
          <ul class="guide-list">
            <li data-i18n="billing.manage.1">회원 기본정보, 인증상태, 이용권 상태를 DB에 분리 저장하세요.</li>
            <li data-i18n="billing.manage.2">비밀번호는 해시 저장, API 키는 암호화 저장하세요.</li>
            <li data-i18n="billing.manage.3">운영자 화면에서 회원검색/구독갱신/결제조회 기능을 제공하세요.</li>
          </ul>
          <p class="side-note" data-i18n="admin.notice">데모 모드 관리자 계정: dufltptkd01@naver.com</p>
        </article>
      </div>
    </section>

    <section class="result-area glass-panel">
      <h2 data-i18n="result.title">실행 로그</h2>
      <pre id="resultBox" data-i18n="result.default">준비 완료. 상단 탭에서 설정을 완료하고 자동매매를 시작하세요.</pre>
    </section>
  </main>

  <script src="./config.js"></script>
  <script src="./portal-core.js"></script>
  <script src="./index.js"></script>
</body>
</html>
